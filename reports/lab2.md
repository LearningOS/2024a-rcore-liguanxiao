# 实现功能

首先说一下sys_get_time和sys_task_info都是把前面的代码拿过来进行微调,唯一的区别点是指针为虚拟地址,需要指向明确的物理地址,所以需要写一个函数,使其从虚拟地址转换为物理地址.转换为写函数即可.其次是其他两个函数一个是创建映射,一个删除,主要是围绕Maparea这个类使用,分别使用他的map以及unmap对内存空间中的内容进行分离,然后达到效果.对于第一个,对port做位运算然后进行处理,new Maparea对象,第二个则需要判断删除的地方的类型即可完成.

# 简答题

1.

V（Valid）: 表示此页表项是否有效。如果 V=0，表示此页表项无效。
R（Read）: 允许对该页面进行读操作。
W（Write）: 允许对该页面进行写操作。
X（Execute）: 允许对该页面执行代码。
U（User）: 如果 U=1，表示用户态代码也可以访问该页面；否则只有内核态可以访问。
G（Global）: 全局页面标志，用于优化 TLB 中的条目。
A（Accessed）: 如果 A=1，表示此页面已经被访问过。
D（Dirty）: 如果 D=1，表示此页面的数据已经被修改过。

2.

(1)页面故障,访问故障,非法地址

(2)虚拟地址,缺页产生的指令,异常存储信息

(3)减少资源消耗

(4)SV 39页面大小为4KB 10GB./4KB*8 大约为2MB

(5)创建时仅创建需要的页表项,并设为0表示初始化.当缺页发生时,捕获中断,检查页面是否合法,合法重新设置U=1,重新运行指令.

(6)设置U=0

3.

(1)在进入内核态时，更新页表基址寄存器（SATP 或 CR3）指向新的页表.在返回用户态时，再次更新页表基址寄存器。

(2)对于内核页面，设置 U 标志为 0，表示用户态不能访问这些页面

(3)简化内存,减少上下文开销

(4)双页表 在进入内核态和返回用户态更换, 单页表在系统调用和中断处理

# 荣耀准则

1. 在完成本次实验的过程（含此前学习的过程）中，我曾分别与 **以下各位** 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：

   > *无*

2. 无料** ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：

   > *公告文档*

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。